<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <link href="__PUBLIC__/css/tongji.css" rel="stylesheet" />
    <script src="__PUBLIC__/js/jquery-1.8.3.min.js"></script>
    <script src="__PUBLIC__/js/bianse.js"></script>
</head>
<body>
    <form method="post" id="form">
    <div>
        <span>角色管理</span>
        <!--<input type="text" placeholder="请输入新增的角色名" name="role_name">-->
        <a href='__URL__/quanxian'><input type="button" value="新增角色" style="width: 120px;height:22px;margin-left:5px" ></a>
        <table id="neirong" border='0' cellspacing='0'>
            <tr>
                <td>序号</td>
                <td>角色名称</td>
                <td>编辑</td>
                <!--<td>查看</td>-->
            </tr>
            <volist name='ren' id='val' key="k">
            <tr class="neirong">
                <td>{:(I('get.p'))?((I('get.p')-1)*12+$k):($k)}</td>
                <td class="bian" style="width: 500px">{$val.role_name}</td>
                <td><a href='__URL__/quanxian?id={$val.id}&&role_n={$val.role_name}'><input type="button" value="编辑" ></a></td>
                <!--<td><a href="__URL__/role_select?id={$val.id}&&role_n={$val.role_name}"><input type="button" value="查看" ></a></td>-->
            </tr>
            </volist>
        </table>
    </div>
<!--        <script>
            $(function(){
                $(".btn_upt").click(function(){
                    var value = $(this).parent().siblings(".bian").text();
                    var id = $(this).attr("data-id");
                    $(this).parent().siblings(".bian").html("<input type='text' value='"+value+"' name='upt' class='text_upt' data-id='"+id+"' style='text-align:center'>");
                    $(this).parent().siblings(".bian").find(".text_upt").focus();
                    $(this).parent().siblings(".bian").find(".text_upt").select();
                })
                var last;
                $(".text_upt").live("keyup",function(event){
                    var id = $(this).attr("data-id");
                    var value = $(this).val();
                    last = event.timeStamp;
                    if(last-event.timeStamp==0){
                        if(event.which==13){
                            $.ajax({
                                context: this,
                                type:"post",
                                url:"__URL__/role_upt",
                                dataType: "text",
                                data:{id:id,value:value},
                                success:
                                function(data){
                                    if(data!=""){
                                        $(this).parent().html(data);
                                    }
                                }
                            })
                        }
                    }
                })
                $("#add").click(function(){
                        $.ajax({
                            async:false,
                            type:"post",
                            url:"__URL__/shenselect",
                            dataType: "text",
                            data:null,
                            success:
                            function(data){
                                if(data!=1){
                                    alert("您没有权限进行此操作!请联系超级管理员!");
                                }else{
                                    var frm = document.getElementById('form');
                                        frm.action='__URL__/addrole';
                                        frm.submit();
                                }
                            }
                        })
                })
            })
        </script>-->
    </form>
</body>
</html>
