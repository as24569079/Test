(function(c){c.fn.toast=function(a){return new d(this[0],a)};var d=(function(){var a=function(b,f){if(typeof b==="string"||b instanceof String){this.container=document.getElementById(b)}else{this.container=b}if(!this.container){window.alert("error finding container for toast "+b);return}if(typeof(f)==="string"||typeof(f)==="number"){f={message:f}}this.styleType=f.styleType||1;this.width=f.width||this.width;this.height=f.height||this.height;this.cls=f.cls?f.cls:"";this.message=f.message||"";this.delay=f.delay||this.delay;this.position=f.position||"";this.cls+=" "+this.position;this.type=f.type||"";this.autoClose=f.autoClose||this.autoClose;this.textAlign=f.textAlign||this.textAlign;this.keyUp=f.keyUp||this.keyUp;this.container=c(this.container);if(this.container.find(".mjdToastContainer").length===0){this.container.append("<div class='mjdToastContainer'></div>")}this.container=this.container.find(".mjdToastContainer");this.container.removeClass("tr tb br tl tc bc");if(f.autoClose===false){f.autoClose=false}this.show()};a.prototype={cls:null,message:null,delay:2000,styleType:1,el:null,container:null,timer:null,width:145,height:88,autoClose:true,textAlign:"center",marginTop:-44,keyUp:false,show:function(){var m=this;var k=this.addHtml();this.el=c(k).get(0);this.container.append(this.el);var l=c(m.el);var n=m.height;var b=l.find(".messge-box");if(m.keyUp){c(".messge-box").addClass("marT")}b.css("width",m.width);b.css("marginLeft",-m.width/2);b.css("marginTop",m.marginTop);b.removeClass("hidden");var j=l.find(".messge-box-content");j.css("text-align",m.textAlign);if(m.autoClose){m.timer=setTimeout(function(){m.hide()},this.delay)}l.bind("click",function(){m.hide()})},hide:function(){var b=this;if(b.timer!=null){clearTimeout(b.timer)}c(b.el).unbind("click").addClass("hidden");c(b.el).css("height","0");b.remove()},remove:function(){var b=c(this.el);b.remove()},addHtml:function(){var b=this;var f="";switch(b.styleType){case 1:f='<div class="message-floor">';f+='<div class="messge-box">';f+='<div class="messge-box-icon"><i class="message-icon '+b.cls+'"></i></div>';f+='<div class="messge-box-content">'+b.message+"</div>";f+="</div>";f+="</div>";break;default:f="";break}return f}};return a})();c.toast=function(a){c(document.body).toast(a)}})($);function AddressSearch(){var ad=window.navigator.userAgent;var M=document.querySelectorAll(".s-close");var Q=document.querySelector(".s-text-close");var G=document.querySelector(".common-wrapper");var J=G.getElementsByTagName("input");var O=document.querySelector(".textauto");var W=document.querySelector(".search-result");var E="";var P=document.querySelector(".set-default");var T=document.querySelector(".fixed-top");var F=document.querySelector(".fixed-bottom");var aa=document.querySelector(".check-btn-total");var X=document.getElementById("body");var R=document.body.scrollHeight;var H=function(){L()};var L=function(){S();Y();ab();I();K();C();V();Z()};var U=function(b){W.innerHTML="";if(O.value.length>0){E="";if(b){for(var d=0;d<b.length;d++){var c=new RegExp(O.value,"gi");var a='<p class="categories">'+O.value+"</p>";b[d]=b[d].replace(c,a);ac(b[d])}}if(ad.indexOf("iPhone")!=-1&&ad.indexOf("baidubrowser")!=-1){E+='<div class="ios-baidu-scroll"></div>'}W.innerHTML=E;W.style.display="block"}else{W.style.display="none"}};var N=function(){var a=null;if(document.getElementById("selectAddressBtn").getAttribute("region-data")){a={"addressSearchParam.idProvince":document.getElementById("address.idProvince").value,"addressSearchParam.idCity":document.getElementById("address.idCity").value,"addressSearchParam.idArea":document.getElementById("address.idArea").value,"addressSearchParam.provinceNameIgnore":document.getElementById("provinceNameIgnoreId").value,"addressSearchParam.cityNameIgnore":document.getElementById("cityNameIgnoreId").value,"addressSearchParam.areaNameIgnore":document.getElementById("areaNameIgnoreId").value,"addressSearchParam.key":document.getElementById("address_where").value}}else{a={"addressSearchParam.idProvince":0,"addressSearchParam.idCity":0,"addressSearchParam.idArea":0,"addressSearchParam.provinceNameIgnore":"","addressSearchParam.cityNameIgnore":"","addressSearchParam.areaNameIgnore":"","addressSearchParam.key":document.getElementById("address_where").value}}$.ajax({type:"POST",url:"/norder/addressSearch.json",data:a,dataType:"json",success:function(b){var c=b?b.addressSearchList:null;U(c)},error:function(b,c){U(null)}})};var ac=function(a){E+='<div class="result-item bdb-1px">';E+='<div class="ritem-l search-result-wrapper">';E+='<span class="address-icon"></span>';E+='<span class="search-result-item">';E+=a;E+="</span>";E+="</div>";E+="</div>"};var D={versions:function(){var b=navigator.userAgent,a=navigator.appVersion;return{trident:b.indexOf("Trident")>-1,presto:b.indexOf("Presto")>-1,webKit:b.indexOf("AppleWebKit")>-1,gecko:b.indexOf("Gecko")>-1&&b.indexOf("KHTML")==-1,mobile:!!b.match(/Mobile/i),ios:!!b.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:b.indexOf("Android")>-1||b.indexOf("Linux")>-1,iPhone:b.indexOf("iPhone")>-1||b.indexOf("Mac")>-1,iPad:b.indexOf("iPad")>-1,webApp:b.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};var S=function(){for(var a=0;a<J.length;a++){(function(b){J[b].addEventListener("input",function(){if(J[b].value==""){M[b].style.display="none"}else{M[b].style.display="inline-block"}},false);J[b].addEventListener("blur",function(){clearTimeout(c);var c=setTimeout(function(){M[b].style.display="none"},200)},false);J[b].addEventListener("focus",function(){if(J[b].value==""){M[b].style.display="none"}else{M[b].style.display="inline-block"}},false);M[b].addEventListener("click",function(){J[b].value="";if(J[b].value==""){M[b].style.display="none"}},false)})(a)}};var Y=function(){O.addEventListener("click",function(){if(O.value.length>0){N()}O.focus()},false)};var ab=function(){O.addEventListener("focus",function(a){var d=a||event;if(D.versions.android){X.style.height=(R+250)+"px";clearTimeout(c);var c=setTimeout(function(){document.documentElement.scrollTop=135;document.body.scrollTop=135;P.style.display="block";aa.style.display="block"},200)}clearTimeout(b);var b=setTimeout(function(){if(D.versions.ios||D.versions.iPhone||D.versions.iPad){G.style.webkitTransform="translateY(-92px)";G.style.transform="translateY(-92px)";T.style.position="relative";T.style.top="-45px";F.style.position="relative";F.style.top="0px";W.style.position="relative";W.style.top="0px";P.style.display="none";aa.style.display="none"}if(O.value==""){Q.style.display="none"}else{Q.style.display="inline-block"}},200)},false)};var I=function(){O.addEventListener("blur",function(){if(D.versions.android){X.style.height=(R)+"px";clearTimeout(a);var a=setTimeout(function(){document.documentElement.scrollTop=0;document.body.scrollTop=0},200)}clearTimeout(b);var b=setTimeout(function(){if(D.versions.ios||D.versions.iPhone||D.versions.iPad){G.style.webkitTransform="translateY(0px)";G.style.transform="translateY(0px)";T.style.position="relative";T.style.top="0px"}Q.style.display="none";W.style.display="none";P.style.display="block";aa.style.display="block"},200)},false)};var K=function(){if(navigator.userAgent.indexOf("baidubrowser")!=-1){window.addEventListener("focusout",function(){O.blur()},false)}else{window.addEventListener("blur",function(){O.blur()},false)}};var C=function(){O.addEventListener("input",function(){N();if(event.keyCode==13){W.style.display="none";O.blur()}if(O.value==""){Q.style.display="none"}else{Q.style.display="inline-block"}},false)};var V=function(){Q.addEventListener("click",function(){O.focus();clearTimeout(a);var a=setTimeout(function(){O.value="";if(O.value==""){Q.style.display="none"}W.innerHTML="";autosize.update(document.querySelectorAll(".change-sty")[0])},1000);pingClick(document.getElementById("cartUse").value,"MNeworderAddress_Delete","","","")},false)};var Z=function(){W.addEventListener("click",function(a){var c=a||event;var d=c.srcElemnt||c.target;var e=d.querySelector(".categories");if(D.versions.ios||D.versions.iPhone||D.versions.iPad){O.blur();O.focus();clearTimeout(b);var b=setTimeout(function(){if(d.nodeName.toLowerCase()=="span"){O.value=d.innerHTML.replace(/<p class=\"categories\">/g,"").replace(/<\/p>/g,"")}else{if(d.nodeName.toLowerCase()=="p"){O.value=d.parentNode.innerHTML.replace(/<p class=\"categories\">/g,"").replace(/<\/p>/g,"")}}autosize.update(document.querySelectorAll(".change-sty")[0]);N();W.style.display="block";Q.style.display="block"},100)}else{if(D.versions.android){O.blur();O.focus();clearTimeout(b);var b=setTimeout(function(){if(d.nodeName.toLowerCase()=="span"){O.value=d.innerHTML.replace(/<p class=\"categories\">/g,"").replace(/<\/p>/g,"")}else{if(d.nodeName.toLowerCase()=="p"){O.value=d.parentNode.innerHTML.replace(/<p class=\"categories\">/g,"").replace(/<\/p>/g,"")}}autosize.update(document.querySelectorAll(".change-sty")[0]);O.blur();P.style.display="block"},0)}else{if(!D.versions.mobile){O.blur();O.focus();clearTimeout(b);var b=setTimeout(function(){if(d.nodeName.toLowerCase()=="span"){O.value=d.innerHTML.replace(/<p class=\"categories\">/g,"").replace(/<\/p>/g,"")}else{if(d.nodeName.toLowerCase()=="p"){O.value=d.parentNode.innerHTML.replace(/<p class=\"categories\">/g,"").replace(/<\/p>/g,"")}}autosize.update(document.querySelectorAll(".change-sty")[0]);N();W.style.display="block";Q.style.display="block"},200)}}}pingClick(document.getElementById("cartUse").value,"MNeworderAddress_Finish","","","")},false)};return H()}function switchButtonCss(){if(verifyAllInputNotBlank()){$("#submitId").removeClass().addClass("check-btn-red")}else{$("#submitId").removeClass().addClass("check-btn-grey")}}function verifyAllInputNotBlank(){var g=$("#uersNameId").val();var h=$("#mobilePhoneId").val();var e=$("#address_where").val();var f=verifySelectAddress();return Boolean(g&&f&&h&&e)}function verifySelectAddress(){return Boolean($("#selectAddressBtn").attr("region-data"))}var userNameLength=25;var addressLength=40;function verifyUserName(c){var d=new RegExp("^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9])*$");if(Boolean(c)){return d.test(c)}return false}function verifyMobilePhone(f){var d=new RegExp("^(\\d{7}|\\d{10}|\\d{11})$");var e=$("#old_address_mobile").val();if(Boolean(e)&&e==f){return true}else{if(d.test(f)){if(navigator.userAgent.indexOf("baiduboxapp")>-1){return true}return serviceVerifyMobile(f)}else{return false}}}function serviceVerifyMobile(c){var d=true;$.ajax({type:"post",url:"/norder/validateMobile.action",data:{mobile:c},async:false,dataType:"json",error:function(){},success:function(a){if(!Boolean(a.Flag)&&Boolean(a.Message)){d=false}}});return d}function verifyAddress(b){return Boolean(b)&&b.length<=addressLength?true:false}function toastError(c){clearTimeout(d);var d=setTimeout(function(){$.toast({message:c,height:105,width:200,textAlign:"left",cls:"error-icon"})},500)}function keyBoardError(b){$.toast({message:b,height:105,width:200,textAlign:"left",cls:"error-icon",keyUp:true})}$(function(){var w=new Array();var C=$("#addressLabelId").text();if(C&&C.indexOf(" ")!=-1){$("#addressLabelId").text(C.replace(/\s+/g,""))}function x(){w.push(new Date());if(w.length>1&&((w[w.length-1].getTime()-w[w.length-2].getTime())<360000000)){return true}return false}function B(){var c=$("#uersNameId").val();var a=$("#mobilePhoneId").val();var b=$("#address_where").val();return(verifyUserName(c)&&verifyMobilePhone(a)&&verifyAddress(b)&&verifySelectAddress())}function y(){var c=$("#uersNameId").val();var a=$("#mobilePhoneId").val();var b=$("#address_where").val();if(!s()){return}if(!verifyUserName(c)){toastError("\u6536\u8d27\u4eba\u59d3\u540d\u53ea\u80fd\u6709\u4e2d\u6587\u3001\u82f1\u6587\u5b57\u7b26\u6216\u6570\u5b57\u7ec4\u6210")}else{if(!verifyMobilePhone(a)){toastError("\u8f93\u5165\u624b\u673a\u683c\u5f0f\u4e0d\u5bf9\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165")}}}function s(){return $("#submitId").attr("class")=="check-btn-red"}function v(c,a){$(".verify").html(c);$(".popup-w").css({height:"200%",display:"block",position:"fixed"});$(".verify-w").show();$(".verify-w").css({position:"absolute",top:100});var b=setTimeout(function(){$(".popup-w").hide();$(".verify-w").hide()},a)}function z(a,c){$("#succesTipId").html(a);$(".popup-w").css({height:"200%",display:"block",position:"fixed"});$(".confirm-w").hide();$(".delok-w").show();$(".delok-w").css({top:$(window).scrollTop()+$(window).height()/2-$(".delok-w").height()/2});var b=setTimeout(function(){$(".popup-w").hide();$(".delok-w").hide()},c)}$(".myswitch").click(function(){$(this).toggleClass("myswitched");if("myswitch myswitched"==$(this).attr("class")){$("#addressDefaultId").val(true)}else{$("#addressDefaultId").val(false)}pingClick(document.getElementById("cartUse").value,"MNeworderNewAddress_DefaultAddress","","","")});$("#deleteAddressId").click(function(){if($(document).height()<$(window).height()){$(".popup-w").css({height:$(window).height(),display:"block"})}else{$(".popup-w").css({height:$(document).height(),display:"block"})}$(".confirm-w").show();$(".confirm-w").css({top:$(window).scrollTop()+$(window).height()/2-$(".confirm-w").height()/2});$(".cb-ok").click(function(){z("\u5220\u9664\u6210\u529f!",1000);window.location=$("#deleteButton").attr("action")});$("#cancelDeleteAddress").click(function(){$(".confirm-w").hide();$(".popup-w").hide()})});$(".ad-name").blur(function(){verifySelectAddress();switchButtonCss()});$(".ad-mobile").blur(function(){switchButtonCss()});$(".textauto").blur(function(){switchButtonCss()});$("#submitId").click(function(){if($("#addressType").val()=="add"&&$("#addressFrom").val()=="order"){var a=$("#enterType").val();if(a=="A"||a=="B"){event_id="MNeworder_SaveAddress";setTimeout(function(){pingClick($("#cartUse").val(),"MNeworder_SaveAddress",a,"","")},0)}else{if(a=="C"){setTimeout(function(){pingClick($("#cartUse").val(),"MNeworder_CSaveAddress","","","")},0)}else{pingClick($("#cartUse").val(),"MNeworder_SaveAddress","A","","")}}}switchButtonCss();if(B()){if(x()){v("\u8bf7\u52ff\u91cd\u590d\u63d0\u4ea4",2000);return true}if(document.getElementById("address.idProvince").value==84||document.getElementById("provinceNameIgnoreId").value=="���㵺"){z("\u4fdd\u5b58\u5931\u8d25!",2000);w.length=0}else{if(document.getElementById("address.idProvince").value==31&&document.getElementById("address.idCity").value==4163){z("\u4fdd\u5b58\u5931\u8d25!",2000);w.length=0}else{var c="";if($("#isFreeRegister").val()=="1"){c="&page_param=FromNoReg"}$.ajax({url:"/norder/addOrUpdateAddress.json",type:"POST",dataType:"json",data:$("#editAddressForm").serialize(),success:function(m){if(!m.success){z("\u4fdd\u5b58\u5931\u8d25!",2000);w.length=0;return}if((m.updateAddress&&m.updateAddress.Flag)||(m.addAddress&&m.addAddress.Flag)){z("\u4fdd\u5b58\u5e76\u4f7f\u7528\u6210\u529f!",1000);window.location.href="/norder/order.action?sid="+$("#sid").val()+"&flowType="+$("#flowTypeId").val()+c}else{if(m.realRegion){var n=m.realRegion;var q=n.province?n.province:null;var o=n.city?n.city:null;var K=n.area?n.area:null;var N=n.town?n.town:null;var f=q?getIdValue(q.id):0;var g=o?getIdValue(o.id):0;var l=K?getIdValue(K.id):0;var M=N?getIdValue(N.id):0;var d=q?getNameValue(q.name):"";var p=o?getNameValue(o.name):"";var k=K?getNameValue(K.name):"";var r=N?getNameValue(N.name):"";var L=n.longitude;var e=n.latitude;var j=n.coord_type;if(m.message){$("#checkSaveAddressId").text(m.message)}F();$("#check-btn-cancel").click(function(){i();$("#validRegionId").val(false)});$("#updateAddressId").click(function(){i();document.getElementById("address.idProvince").value=f;document.getElementById("address.idCity").value=g;document.getElementById("address.idArea").value=l;document.getElementById("address.idTown").value=M;$("#addressLabelId").text(d+p+k+r);$("#provinceNameIgnoreId").val(d);$("#cityNameIgnoreId").val(p);$("#areaNameIgnoreId").val(k);$("#townNameIngoreId").val(r);$("#longitudeId").val(L);$("#latitudeId").val(e);$("#coordTypeId").val(j);$("#selectAddressBtn").attr("region-data",f+","+g+","+l+","+M)})}else{z("\u4fdd\u5b58\u5931\u8d25!",2000);window.location.href="/norder/order.action?sid="+$("#sid").val()+"&flowType="+$("#flowTypeId").val()+c}}w.length=0},error:function(d,e){z("\u4fdd\u5b58\u5931\u8d25!",2000);w.length=0;window.location.href="/norder/order.action?sid="+$("#sid").val()+"&flowType="+$("#flowTypeId").val()+c}});var b="1";if($("#addressType").val()=="add"&&$("#addressFrom").val()=="order"){b="0"}pingClick(document.getElementById("cartUse").value,"MNeworderNewAddress_Save",b,"","")}}return true}y();return false});$("#mobileInputDiv")[0].oninput=function(){switchButtonCss()};function t(){$.toast({message:"\u5173\u6ce8\u6210\u529f\uff01",cls:"succee-icon"})}$(".ad-name")[0].oninput=function(a){var b=$("#uersNameId").val();if(b&&b.length>userNameLength){$("#uersNameId").val(b.substr(0,userNameLength));keyBoardError("\u6536\u8d27\u4eba\u59d3\u540d\u6700\u591a\u4e3a25\u4e2a\u6587\u5b57")}switchButtonCss()};$(".s-close").click(function(){switchButtonCss()});var D=document.getElementsByClassName("textauto");for(var E=0;E<D.length;E++){D[E].oninput=function(c){switchButtonCss();var a=$("#address_where").val();if(a&&a.length>addressLength){$("#address_where").val(a.substr(0,addressLength))}var b=this.scrollHeight;if(b>25&&b<100){this.style.height=b+"px"}else{if(b>80){this.style.height=80+"px"}else{if(b<25){this.style.height=25+"px"}}}}}if($("#jump_floor_index_check").length>0){$("#jump_floor_index_check").show();var h=document.getElementById("jump_floor_info");var u=h.offsetWidth;var A=h.offsetHeight;h.style.marginTop=-(A/2)+"px";var i=function(){$("#jump_floor_index_check").hide()};i();var F=function(){$("#jump_floor_index_check").show()};$("#check-btn-cancel").click(function(){$("#jump_floor_index_check").hide()})}});
/*!
   �༭��ַ��ϸ��Ϣ����Ӧ�߶�
	Autosize 3.0.8
	license: MIT
	http://www.jacklmoore.com/autosize
*/
;!function(b,a){if("function"==typeof define&&define.amd){define(["exports","module"],a)}else{if("undefined"!=typeof exports&&"undefined"!=typeof module){a(exports,module)}else{var c={exports:{}};a(c.exports,c),b.autosize=c.exports}}}(this,function(d,b){function f(w){function B(){var e=window.getComputedStyle(w,null);"vertical"===e.resize?w.style.resize="none":"both"===e.resize&&(w.style.resize="horizontal"),A="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),p()}function j(e){var i=w.style.width;w.style.width="0px",w.offsetWidth,w.style.width=i,z=e,m&&(w.style.overflowY=e),k()}function k(){var l=window.pageYOffset,r=document.body.scrollTop,s=w.style.height;w.style.height="auto";var e=w.scrollHeight+A;return 0===w.scrollHeight?void (w.style.height=s):(w.style.height=e+"px",document.documentElement.scrollTop=l,void (document.body.scrollTop=r))}function p(){var l=w.style.height;k();var e=window.getComputedStyle(w,null);if(e.height!==w.style.height?"visible"!==z&&j("visible"):"hidden"!==z&&j("hidden"),l!==w.style.height){var n=document.createEvent("Event");n.initEvent("autosize:resized",!0,!1),w.dispatchEvent(n)}}var h=void 0===arguments[1]?{}:arguments[1],x=h.setOverflowX,C=void 0===x?!0:x,y=h.setOverflowY,m=void 0===y?!0:y;if(w&&w.nodeName&&"TEXTAREA"===w.nodeName&&!w.hasAttribute("data-autosize-on")){var A=null,z="hidden",q=function(e){window.removeEventListener("resize",p),w.removeEventListener("input",p),w.removeEventListener("keyup",p),w.removeAttribute("data-autosize-on"),w.removeEventListener("autosize:destroy",q),Object.keys(e).forEach(function(i){w.style[i]=e[i]})}.bind(w,{height:w.style.height,resize:w.style.resize,overflowY:w.style.overflowY,overflowX:w.style.overflowX,wordWrap:w.style.wordWrap});w.addEventListener("autosize:destroy",q),"onpropertychange" in w&&"oninput" in w&&w.addEventListener("keyup",p),window.addEventListener("resize",p),w.addEventListener("input",p),w.addEventListener("autosize:update",p),w.setAttribute("data-autosize-on",!0),m&&(w.style.overflowY="hidden"),C&&(w.style.overflowX="hidden",w.style.wordWrap="break-word"),B()}}function g(i){if(i&&i.nodeName&&"TEXTAREA"===i.nodeName){var h=document.createEvent("Event");h.initEvent("autosize:destroy",!0,!1),i.dispatchEvent(h)}}function a(i){if(i&&i.nodeName&&"TEXTAREA"===i.nodeName){var h=document.createEvent("Event");h.initEvent("autosize:update",!0,!1),i.dispatchEvent(h)}}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(c=function(h){return h},c.destroy=function(h){return h},c.update=function(h){return h}):(c=function(i,h){return i&&Array.prototype.forEach.call(i.length?i:[i],function(j){return f(j,h)}),i},c.destroy=function(h){return h&&Array.prototype.forEach.call(h.length?h:[h],g),h},c.update=function(h){return h&&Array.prototype.forEach.call(h.length?h:[h],a),h}),b.exports=c});