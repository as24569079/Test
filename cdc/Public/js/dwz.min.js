//dwz.core.js
var DWZ = { keyCode: { ENTER: 13, ESC: 27, END: 35, HOME: 36, SHIFT: 16, TAB: 9, LEFT: 37, RIGHT: 39, UP: 38, DOWN: 40, DELETE: 46, BACKSPACE: 8 }, isOverAxis: function (b, a, c) { return (b > a) && (b < (a + c)) }, isOver: function (f, b, e, d, a, c) { return this.isOverAxis(f, e, a) && this.isOverAxis(b, d, c) }, pageInfo: { pageNum: "pageNum", numPerPage: "numPerPage", orderField: "orderField", orderDirection: "orderDirection" }, statusCode: { ok: 200, error: 300, timeout: 301 }, ui: { sbar: true }, frag: {}, _msg: {}, _set: { loginUrl: "", loginTitle: "", debug: false }, msg: function (c, b) { var a = function (g, e) { e = e || []; var d = g; for (var f = 0; f < e.length; f++) { d = d.replace(new RegExp("\\{" + f + "\\}", "g"), e[f]) } return d }; return a(this._msg[c], b) }, debug: function (a) { if (this._set.debug) { if (typeof (console) != "undefined") { console.log(a) } else { alert(a) } } }, loadLogin: function () { if ($.pdialog && DWZ._set.loginTitle) { $.pdialog.open(DWZ._set.loginUrl, "login", DWZ._set.loginTitle, { mask: true, width: 520, height: 260 }) } else { window.location = DWZ._set.loginUrl } }, jsonEval: function (data) { try { if ($.type(data) == "string") { return eval("(" + data + ")") } else { return data } } catch (e) { return {} } }, ajaxError: function (c, a, b) { if (alertMsg) { alertMsg.error("<div>Http status: " + c.status + " " + c.statusText + "</div><div>ajaxOptions: " + a + "</div><div>thrownError: " + b + "</div><div>" + c.responseText + "</div>") } else { alert("Http status: " + c.status + " " + c.statusText + "\najaxOptions: " + a + "\nthrownError:" + b + "\n" + c.responseText) } }, ajaxDone: function (a) { if (a.statusCode === undefined && a.message === undefined) { if (alertMsg) { return alertMsg.error(a) } else { return alert(a) } } if (a.statusCode == DWZ.statusCode.error) { if (a.message && alertMsg) { alertMsg.error(a.message) } } else { if (a.statusCode == DWZ.statusCode.timeout) { if (alertMsg) { alertMsg.error(a.message || DWZ.msg("sessionTimout"), { okCall: DWZ.loadLogin }) } else { DWZ.loadLogin() } } else { if (a.message && alertMsg) { alertMsg.correct(a.message) } } } }, init: function (c, a) { var e = $.extend({ loginUrl: "login.html", loginTitle: null, callback: null, debug: false, statusCode: {} }, a); this._set.loginUrl = e.loginUrl; this._set.loginTitle = e.loginTitle; this._set.debug = e.debug; $.extend(DWZ.statusCode, e.statusCode); $.extend(DWZ.pageInfo, e.pageInfo); var d = '<?xml version="1.0" encoding="utf-8"?> <_AJAX_> <!-- dwz.dialog --> <_PAGE_ id="dialogFrag"><![CDATA[<div class="dialog" style="top:150px; left:300px;"> <div class="dialogHeader" onselectstart="return false;" oncopy="return false;" onpaste="return false;" oncut="return false;"> <div class="dialogHeader_r"> <div class="dialogHeader_c"> <a class="close" href="#close">close</a> <a class="maximize" href="#maximize">maximize</a> <a class="restore" href="#restore">restore</a> <a class="minimize" href="#minimize">minimize</a> <h1>弹出窗口</h1> </div> </div> </div> <div class="dialogContent layoutBox unitBox"> </div> <div class="dialogFooter"><div class="dialogFooter_r"><div class="dialogFooter_c"></div></div></div> <div class="resizable_h_l" tar="nw"></div> <div class="resizable_h_r" tar="ne"></div> <div class="resizable_h_c" tar="n"></div> <div class="resizable_c_l" tar="w" style="height:300px;"></div> <div class="resizable_c_r" tar="e" style="height:300px;"></div> <div class="resizable_f_l" tar="sw"></div> <div class="resizable_f_r" tar="se"></div> <div class="resizable_f_c" tar="s"></div> </div> ]]></_PAGE_> <!-- dwz.dialog shadow --> <_PAGE_ id="dialogProxy"><![CDATA[<div id="dialogProxy" class="dialog dialogProxy"> <div class="dialogHeader"> <div class="dialogHeader_r"> <div class="dialogHeader_c"> <a class="close" href="#close">close</a> <a class="maximize" href="#maximize">maximize</a> <a class="minimize" href="#minimize">minimize</a> <h1></h1> </div> </div> </div> <div class="dialogContent"></div> <div class="dialogFooter"> <div class="dialogFooter_r"> <div class="dialogFooter_c"> </div> </div> </div> </div> ]]></_PAGE_> <!-- dwz.dialog taskbar --> <_PAGE_ id="taskbar"><![CDATA[<div id="taskbar" style="left:0px; display:none;"> <div class="taskbarContent"> <ul></ul> </div> <div class="taskbarLeft taskbarLeftDisabled" style="display:none;">taskbarLeft</div> <div class="taskbarRight" style="display:none;">taskbarRight</div> </div> ]]></_PAGE_> <!-- other dwz fragment --> <_PAGE_ id="dwzFrag"><![CDATA[]]></_PAGE_> <!-- dwz.pagination --> <_PAGE_ id="pagination"><![CDATA[<ul> <li class="j-first"> <a class="first" href="javascript:;"><span>首页</span></a> <span class="first"><span>首页</span></span> </li> <li class="j-prev"> <a class="previous" href="javascript:;"><span>上一页</span></a> <span class="previous"><span>上一页</span></span> </li> #pageNumFrag# <li class="j-next"> <a class="next" href="javascript:;"><span>下一页</span></a> <span class="next"><span>下一页</span></span> </li> <li class="j-last"> <a class="last" href="javascript:;"><span>末页</span></a> <span class="last"><span>末页</span></span> </li> <li class="jumpto"><input class="textInput" type="text" size="4" value="#currentPage#" /><input class="goto" type="button" value="确定" /></li> </ul> ]]></_PAGE_> <!-- dwz.alertMsg --> <_PAGE_ id="alertBoxFrag"><![CDATA[<div id="alertMsgBox" class="alert"><div class="alertContent"><div class="#type#"><div class="alertInner"><h1>#title#</h1><div class="msg">#message#</div></div><div class="toolBar"><ul>#butFragment#</ul></div></div></div><div class="alertFooter"><div class="alertFooter_r"><div class="alertFooter_c"></div></div></div></div> ]]></_PAGE_> <_PAGE_ id="alertButFrag"><![CDATA[<li><a class="button" rel="#callback#" onclick="alertMsg.close()" href="javascript:"><span>#butMsg#</span></a></li> ]]></_PAGE_> <_PAGE_ id="calendarFrag"><![CDATA[<div id="calendar"> <div class="main"> <div class="head"> <table width="100%" border="0" cellpadding="0" cellspacing="2"> <tr> <td><select name="year"></select></td> <td><select name="month"></select></td> <td width="20"><span class="close">×</span></td> </tr> </table> </div> <div class="body"> <dl class="dayNames"><dt>日</dt><dt>一</dt><dt>二</dt><dt>三</dt><dt>四</dt><dt>五</dt><dt>六</dt></dl> <dl class="days">日期列表选项</dl> <div style="clear:both;height:0;line-height:0"></div> <div class="tm"> <ul class="hh"> <li>0</li> <li>1</li> <li>2</li> <li>3</li> <li>4</li> <li>5</li> <li>6</li> <li>7</li> <li>8</li> <li>9</li> <li>10</li> <li>11</li> <li>12</li> <li>13</li> <li>14</li> <li>15</li> <li>16</li> <li>17</li> <li>18</li> <li>19</li> <li>20</li> <li>21</li> <li>22</li> <li>23</li> </ul> <ul class="mm"> <li>0</li> <li>5</li> <li>10</li> <li>15</li> <li>20</li> <li>25</li> <li>30</li> <li>35</li> <li>40</li> <li>45</li> <li>50</li> <li>55</li> </ul> <ul class="ss"> <li>0</li> <li>10</li> <li>20</li> <li>30</li> <li>40</li> <li>50</li> </ul> </div> </div> <div class="foot"> <table class="time"> <tr> <td> <input type="text" class="hh" maxlength="2" start="0" end="23"/>: <input type="text" class="mm" maxlength="2" start="0" end="59"/>: <input type="text" class="ss" maxlength="2" start="0" end="59"/> </td> <td><ul><li class="up">&and;</li><li class="down">&or;</li></ul></td> </tr> </table> <button type="button" class="clearBut">清空</button> <button type="button" class="okBut">确定</button> <div> </div> </div> ]]></_PAGE_> <_PAGE_ id="navTabCM"><![CDATA[<ul id="navTabCM"> <li rel="reload">刷新标签页</li> <li rel="closeCurrent">关闭标签页</li> <li rel="closeOther">关闭其它标签页</li> <li rel="closeAll">关闭全部标签页</li> </ul> ]]></_PAGE_> <_PAGE_ id="dialogCM"><![CDATA[<ul id="dialogCM"> <li rel="closeCurrent">关闭弹出窗口</li> <li rel="closeOther">关闭其它弹出窗口</li> <li rel="closeAll">关闭全部弹出窗口</li> </ul> ]]></_PAGE_> <_PAGE_ id="externalFrag"><![CDATA[<iframe src="{url}" style="width:100%;height:{height};" frameborder="no" border="0" marginwidth="0" marginheight="0"></iframe> ]]></_PAGE_> <_MSG_ id="validateFormError"><![CDATA[提交数据不完整，{0}个字段有错误，请改正后再提交!]]></_MSG_> <_MSG_ id="sessionTimout"><![CDATA[会话超时，请重新登录!]]></_MSG_> <_MSG_ id="alertSelectMsg"><![CDATA[请选择信息!]]></_MSG_> <_MSG_ id="forwardConfirmMsg"><![CDATA[继续下一步!]]></_MSG_> <_MSG_ id="dwzTitle"><![CDATA[DWZ富客户端框架]]></_MSG_> <_MSG_ id="mainTabTitle"><![CDATA[我的主页]]></_MSG_> </_AJAX_>'; var b = $.parseXML(d); $(b).find("_PAGE_").each(function () { var f = $(this).attr("id"); if (f) { DWZ.frag[f] = $(this).text() } }); $(b).find("_MSG_").each(function () { var f = $(this).attr("id"); if (f) { DWZ._msg[f] = $(this).text() } }); if (jQuery.isFunction(e.callback)) { e.callback() } } }; (function (a) { a.setRegional = function (b, c) { if (!a.regional) { a.regional = {} } a.regional[b] = c }; a.fn.extend({ ajaxUrl: function (c) { var b = a(this); if (a.fn.xheditor) { a("textarea.editor", b).xheditor(false) } a.ajax({ type: c.type || "GET", url: c.url, data: c.data, cache: false, success: function (d) { var e = DWZ.jsonEval(d); if (e.statusCode == DWZ.statusCode.timeout) { alertMsg.error(e.message || DWZ.msg("sessionTimout"), { okCall: function () { if (a.pdialog) { a.pdialog.checkTimeout() } if (navTab) { navTab.checkTimeout() } DWZ.loadLogin() } }) } if (e.statusCode == DWZ.statusCode.error) { if (e.message) { alertMsg.error(e.message) } } else { b.html(d).initUI(); if (a.isFunction(c.callback)) { c.callback(d) } } }, error: DWZ.ajaxError }) }, loadUrl: function (b, c, d) { a(this).ajaxUrl({ url: b, data: c, callback: d }) }, initUI: function () { return this.each(function () { if (a.isFunction(initUI)) { initUI(this) } }) }, layoutH: function (b) { return this.each(function () { var e = a(this); if (!b) { b = e.parents("div.layoutBox:first") } var c = b.height(); var f = parseInt(e.attr("layoutH")); var d = c - f > 50 ? c - f : 50; if (e.isTag("table")) { e.removeAttr("layoutH").wrap('<div layoutH="' + f + '" style="overflow:auto;height:' + d + 'px"></div>') } else { e.height(d).css("overflow", "auto") } }) }, hoverClass: function (b) { var c = b || "hover"; return this.each(function () { a(this).hover(function () { a(this).addClass(c) }, function () { a(this).removeClass(c) }) }) }, focusClass: function (b) { var c = b || "textInputFocus"; return this.each(function () { a(this).focus(function () { a(this).addClass(c) }).blur(function () { a(this).removeClass(c) }) }) }, inputAlert: function () { return this.each(function () { var d = a(this); function c() { return d.parent().find("label.alt") } function e(g) { var f = d.position(); return { width: d.width(), top: f.top + "px", left: f.left + "px", opacity: g || 1 } } if (c().size() < 1) { if (!d.attr("id")) { d.attr("id", d.attr("name") + "_" + Math.round(Math.random() * 10000)) } var b = a('<label class="alt" for="' + d.attr("id") + '">' + d.attr("alt") + "</label>").appendTo(d.parent()); b.css(e(1)); if (d.val()) { b.hide() } } d.focus(function () { c().css(e(0.3)) }).blur(function () { if (!a(this).val()) { c().show().css("opacity", 1) } }).keydown(function () { c().hide() }) }) }, isTag: function (b) { if (!b) { return false } return a(this)[0].tagName.toLowerCase() == b ? true : false }, isBind: function (b) { var c = a(this).data("events"); return c && b && c[b] }, log: function (b) { return this.each(function () { if (console) { console.log("%s: %o", b, this) } }) } }); a.extend(String.prototype, { isPositiveInteger: function () { return (new RegExp(/^[1-9]\d*$/).test(this)) }, isInteger: function () { return (new RegExp(/^\d+$/).test(this)) }, isNumber: function (c, b) { return (new RegExp(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/).test(this)) }, trim: function () { return this.replace(/(^\s*)|(\s*$)|\r|\n/g, "") }, startsWith: function (b) { return this.indexOf(b) === 0 }, endsWith: function (b) { var c = this.length - b.length; return c >= 0 && this.lastIndexOf(b) === c }, replaceSuffix: function (b) { return this.replace(/\[[0-9]+\]/, "[" + b + "]").replace("#index#", b) }, trans: function () { return this.replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&quot;/g, '"') }, replaceAll: function (c, b) { return this.replace(new RegExp(c, "gm"), b) }, replaceTm: function (b) { if (!b) { return this } return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})", "g"), function (c) { return b[c.replace(/[{}]+/g, "")] }) }, replaceTmById: function (b) { var c = b || a(document); return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})", "g"), function (d) { var e = c.find("#" + d.replace(/[{}]+/g, "")); return e.val() ? e.val() : d }) }, isFinishedTm: function () { return !(new RegExp("{[A-Za-z_]+[A-Za-z0-9_]*}").test(this)) }, skipChar: function (b) { if (!this || this.length === 0) { return "" } if (this.charAt(0) === b) { return this.substring(1).skipChar(b) } return this }, isValidPwd: function () { return (new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this)) }, isValidMail: function () { return (new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim())) }, isSpaces: function () { for (var b = 0; b < this.length; b += 1) { var c = this.charAt(b); if (c != " " && c != "\n" && c != "\t" && c != "\r") { return false } } return true }, isPhone: function () { return (new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/).test(this)) }, isUrl: function () { return (new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this)) }, isExternalUrl: function () { return this.isUrl() && this.indexOf("://" + document.domain) == -1 } }) })(jQuery); function Map() { this.elements = new Array(); this.size = function () { return this.elements.length }; this.isEmpty = function () { return (this.elements.length < 1) }; this.clear = function () { this.elements = new Array() }; this.put = function (b, a) { this.remove(b); this.elements.push({ key: b, value: a }) }; this.remove = function (a) { try { for (i = 0; i < this.elements.length; i++) { if (this.elements[i].key == a) { this.elements.splice(i, 1); return true } } } catch (b) { return false } return false }; this.get = function (a) { try { for (i = 0; i < this.elements.length; i++) { if (this.elements[i].key == a) { return this.elements[i].value } } } catch (b) { return null } }; this.element = function (a) { if (a < 0 || a >= this.elements.length) { return null } return this.elements[a] }; this.containsKey = function (a) { try { for (i = 0; i < this.elements.length; i++) { if (this.elements[i].key == a) { return true } } } catch (b) { return false } return false }; this.values = function () { var a = new Array(); for (i = 0; i < this.elements.length; i++) { a.push(this.elements[i].value) } return a }; this.keys = function () { var a = new Array(); for (i = 0; i < this.elements.length; i++) { a.push(this.elements[i].key) } return a } };

//dwz.barDrag.js
(function (a) { a.fn.cssv = function (b) { var c = a(this).css(b); return c.substring(0, c.indexOf("px")) * 1 }; a.fn.jBar = function (b) { var c = a.extend({ container: "#container", collapse: ".collapse", toggleBut: ".toggleCollapse div", sideBar: "#sidebar", sideBar2: "#sidebar_s", splitBar: "#splitBar", splitBar2: "#splitBarProxy" }, b); return this.each(function () { var f = this; var d = a(c.sideBar2, f); var e = a(c.sideBar, f); a(c.toggleBut, e).click(function () { DWZ.ui.sbar = false; a(c.splitBar).hide(); var j = d.cssv("left") + d.outerWidth(); var g = j - e.outerWidth(); var i = a(c.container).cssv("left") - (e.outerWidth() - d.outerWidth()); var h = e.outerWidth() - d.outerWidth() + a(c.container).outerWidth(); a(c.container).animate({ left: i, width: h }, 50, function () { e.animate({ left: g }, 500, function () { e.hide(); d.show().css("left", -50).animate({ left: 5 }, 200); a(window).trigger("resizeGrid") }) }); a(c.collapse, d).click(function () { var l = d.cssv("left") + d.outerWidth(); if (e.is(":hidden")) { a(c.toggleBut, e).hide(); e.show().animate({ left: l }, 500); a(c.container).click(k) } else { e.animate({ left: g }, 500, function () { e.hide() }) } function k() { a(c.container).unbind("click", k); if (!DWZ.ui.sbar) { e.animate({ left: g }, 500, function () { e.hide() }) } } return false }); return false }); a(c.toggleBut, d).click(function () { DWZ.ui.sbar = true; d.animate({ left: -25 }, 200, function () { e.show() }); e.animate({ left: 5 }, 800, function () { a(c.splitBar).show(); a(c.toggleBut, e).show(); var h = 5 + e.outerWidth() + a(c.splitBar).outerWidth(); var g = a(c.container).outerWidth() - (h - a(c.container).cssv("left")); a(c.container).css({ left: h, width: g }); a(c.collapse, d).unbind("click"); a(window).trigger("resizeGrid") }); return false }); a(c.splitBar).mousedown(function (g) { a(c.splitBar2).each(function () { var h = a(this); setTimeout(function () { h.show() }, 100); h.css({ visibility: "visible", left: a(c.splitBar).css("left") }); h.jDrag(a.extend(b, { obj: a("#sidebar"), move: "horizontal", event: g, stop: function () { a(this).css("visibility", "hidden"); var i = a(this).cssv("left") - a(c.splitBar).cssv("left"); var l = e.outerWidth() + i; var k = a(c.container).cssv("left") + i; var j = a(c.container).outerWidth() - i; e.css("width", l); a(c.splitBar).css("left", a(this).css("left")); a(c.container).css({ left: k, width: j }) } })); return false }) }) }) } })(jQuery);

//dwz.ui.js
function initEnv() { $("body").append(DWZ.frag.dwzFrag); if ($.browser.msie && /6.0/.test(navigator.userAgent)) { try { document.execCommand("BackgroundImageCache", false, true) } catch (b) { } } if ($.browser.msie) { window.setInterval("CollectGarbage();", 10000) } $(window).resize(function () { initLayout(); $(this).trigger("resizeGrid") }); var a = $("#background,#progressBar"); a.hide(); $(document).ajaxStart(function () { $("#ptohtrddBar").show(); a.show() }).ajaxStop(function () { a.hide() }); $("#leftside").jBar({ minW: 150, maxW: 700 }); if ($.taskBar) { $.taskBar.init() } navTab.init(); if ($.fn.switchEnv) { $("#switchEnvBox").switchEnv() } if ($.fn.navMenu) { $("#navMenu").navMenu() } setTimeout(function () { initLayout(); initUI(); var c = $("div.tabsPageHeader"); c.find(".tabsLeft").hoverClass("tabsLeftHover"); c.find(".tabsRight").hoverClass("tabsRightHover"); c.find(".tabsMore").hoverClass("tabsMoreHover") }, 10) } function initLayout() { var e = $(window).width(); var a = $(window).height(); var d = $(document).width(); var c = $(document).height(); e = e - 175; a = a - 34; if (e < 879) { e = 879 } $("#container").width(e); $("#container .tabsPageContent").height(a - 52).find("[layoutH]").layoutH(); $("#sidebar, #sidebar_s .collapse,#new-main-menu").height(c); $("#taskbar").css({ top: a + $("#PageHeader").height() + 5, width: $(window).width() }); var b = $(document).width() - $(window).width(); $("iframe").css("width", e - b); $("iframe").css("height", a - 52); $("#index_box").css("height", c) } function initUI(_box) { var $p = $(_box || document); $("div.tabs", $p).each(function () { var $this = $(this); var options = {}; options.currentIndex = $this.attr("currentIndex") || 0; options.eventType = $this.attr("eventType") || "click"; $this.tabs(options) }); $("div.accordion", $p).each(function () { var $this = $(this); $this.accordion({ fillSpace: $this.attr("fillSpace"), alwaysOpen: true, active: 0 }) }); if ($.fn.combox) { $("select.combox", $p).combox() } if ($.fn.xheditor) { $("textarea.editor", $p).each(function () { var $this = $(this); var op = { html5Upload: false, skin: "vista", tools: $this.attr("tools") || "full" }; var upAttrs = [["upLinkUrl", "upLinkExt", "zip,rar,txt"], ["upImgUrl", "upImgExt", "jpg,jpeg,gif,png"], ["upFlashUrl", "upFlashExt", "swf"], ["upMediaUrl", "upMediaExt", "avi"]]; $(upAttrs).each(function (i) { var urlAttr = upAttrs[i][0]; var extAttr = upAttrs[i][1]; if ($this.attr(urlAttr)) { op[urlAttr] = $this.attr(urlAttr); op[extAttr] = $this.attr(extAttr) || upAttrs[i][2] } }); $this.xheditor(op) }) } if ($.fn.uploadify) { $(":file[uploader]", $p).each(function () { var $this = $(this); var options = { uploader: $this.attr("uploader"), script: $this.attr("script"), cancelImg: $this.attr("cancelImg"), queueID: $this.attr("fileQueue") || "fileQueue", fileDesc: $this.attr("fileDesc") || "*.jpg;*.jpeg;*.gif;*.png;*.pdf", fileExt: $this.attr("fileExt") || "*.jpg;*.jpeg;*.gif;*.png;*.pdf", folder: $this.attr("folder"), auto: true, multi: true, onError: uploadifyError, onComplete: uploadifyComplete, onAllComplete: uploadifyAllComplete }; if ($this.attr("onComplete")) { options.onComplete = DWZ.jsonEval($this.attr("onComplete")) } if ($this.attr("onAllComplete")) { options.onAllComplete = DWZ.jsonEval($this.attr("onAllComplete")) } if ($this.attr("scriptData")) { options.scriptData = DWZ.jsonEval($this.attr("scriptData")) } $this.uploadify(options) }) } $("input[type=text], input[type=password], textarea", $p).addClass("textInput").focusClass("focus"); $("input[readonly], textarea[readonly]", $p).addClass("readonly"); $("input[disabled=true], textarea[disabled=true]", $p).addClass("disabled"); $("input[type=text]", $p).not("div.tabs input[type=text]", $p).filter("[alt]").inputAlert(); $("div.panelBar li, div.panelBar", $p).hoverClass("hover"); $("div.button", $p).hoverClass("buttonHover"); $("div.buttonActive", $p).hoverClass("buttonActiveHover"); $("div.tabsHeader li, div.tabsPageHeader li, div.accordionHeader, div.accordion", $p).hoverClass("hover"); $("form.required-validate", $p).each(function () { $(this).validate({ focusInvalid: false, focusCleanup: true, errorElement: "span", ignore: ".ignore", invalidHandler: function (form, validator) { var errors = validator.numberOfInvalids(); if (errors) { var message = DWZ.msg("validateFormError", [errors]); alertMsg.error(message) } } }) }); if ($.fn.datepicker) { $("input.date", $p).each(function () { var $this = $(this); var opts = {}; if ($this.attr("format")) { opts.pattern = $this.attr("format") } if ($this.attr("yearstart")) { opts.yearstart = $this.attr("yearstart") } if ($this.attr("yearend")) { opts.yearend = $this.attr("yearend") } $this.datepicker(opts) }) } $("a[target=navTab]", $p).each(function () { $(this).click(function (event) { var $this = $(this); var title = $this.attr("title") || $this.text(); var tabid = $this.attr("rel") || "_blank"; var fresh = eval($this.attr("fresh") || "true"); var external = eval($this.attr("external") || "false"); var url = unescape($this.attr("href")).replaceTmById($(event.target).parents(".unitBox:first")); DWZ.debug(url); if (!url.isFinishedTm()) { alertMsg.error($this.attr("warn") || DWZ.msg("alertSelectMsg")); return false } navTab.openTab(tabid, url, { title: title, fresh: fresh, external: external }); event.preventDefault() }) }); $("a[target=dialog]", $p).each(function () { $(this).click(function (event) { var $this = $(this); var title = $this.attr("title") || $this.text(); var rel = $this.attr("rel") || "_blank"; var options = {}; var w = $this.attr("width"); var h = $this.attr("height"); if (w) { options.width = w } if (h) { options.height = h } options.max = eval($this.attr("max") || "false"); options.mask = eval($this.attr("mask") || "false"); options.maxable = eval($this.attr("maxable") || "true"); options.minable = eval($this.attr("minable") || "true"); options.fresh = eval($this.attr("fresh") || "true"); options.resizable = eval($this.attr("resizable") || "true"); options.drawable = eval($this.attr("drawable") || "true"); options.close = eval($this.attr("close") || ""); options.param = $this.attr("param") || ""; var url = unescape($this.attr("href")).replaceTmById($(event.target).parents(".unitBox:first")); DWZ.debug(url); if (!url.isFinishedTm()) { alertMsg.error($this.attr("warn") || DWZ.msg("alertSelectMsg")); return false } $.pdialog.open(url, rel, title, options); return false }) }); $("a[target=ajax]", $p).each(function () { $(this).click(function (event) { var $this = $(this); var rel = $this.attr("rel"); if (rel) { var $rel = $("#" + rel); $rel.loadUrl($this.attr("href"), {}, function () { $rel.find("[layoutH]").layoutH() }) } event.preventDefault() }) }); $("div.pagination", $p).each(function () { var $this = $(this); $this.pagination({ targetType: $this.attr("targetType"), rel: $this.attr("rel"), totalCount: $this.attr("totalCount"), numPerPage: $this.attr("numPerPage"), pageNumShown: $this.attr("pageNumShown"), currentPage: $this.attr("currentPage") }) }); if ($.fn.sortDrag) { $("div.sortDrag", $p).sortDrag() } if ($.fn.ajaxTodo) { $("a[target=ajaxTodo]", $p).ajaxTodo() } if ($.fn.dwzExport) { $("a[target=dwzExport]", $p).dwzExport() } if ($.fn.lookup) { $("a[lookupGroup]", $p).lookup() } if ($.fn.multLookup) { $("[multLookup]:button", $p).multLookup() } if ($.fn.suggest) { $("input[suggestFields]", $p).suggest() } if ($.fn.itemDetail) { $("table.itemDetail", $p).itemDetail() } if ($.fn.selectedTodo) { $("a[target=selectedTodo]", $p).selectedTodo() } if ($.fn.pagerForm) { $("form[rel=pagerForm]", $p).pagerForm({ parentBox: $p }) } } function recruitCG() { var c = $(".progressContorls").find(".btnBack"), b = $(".progressContorls").find(".btnForward"), d = $(".page-num .cur").attr("data-page"), f = $(".progressContorls").find(".btnReplay"), e = $(".progressContorls").find(".btnStart"), a = d; scene_1(); c.on("click", function () { $(".progressArea").stop().animate({ marginLeft: "+=900px" }, 300); d = a; a = parseFloat(d) - 1; $(".page-num .cur").html(a).attr("data-page", a); $(".progressTitle .steps").siblings().removeClass("active").eq(a - 1).addClass("active"); if (a == 1) { scene_1(); c.hide(); $("#Recruit .btnGroup").css({ "text-align": "right" }) } else { c.show() } if (a == 2) { scene_2() } if (a == 3) { scene_3(); b.hide(); $("#Recruit .btnGroup").hide(); $("#Recruit .btnGroup2").show() } else { $("#Recruit .btnGroup").show(); $("#Recruit .btnGroup2").hide(); b.show() } }); b.on("click", function () { $(".progressArea").stop().animate({ marginLeft: "+=-900px" }, 300); d = a; a = parseFloat(d) + 1; $(".progressTitle .steps").siblings().removeClass("active").eq(a - 1).addClass("active"); $(".page-num .cur").html(a).attr("data-page", a); if (a == 1) { scene_1(); c.hide(); $("#Recruit .btnGroup").css({ "text-align": "right" }) } else { c.show() } if (a == 2) { scene_2() } if (a == 3) { scene_3(); b.hide(); $("#Recruit .btnGroup").hide(); $("#Recruit .btnGroup2").show() } else { $("#Recruit .btnGroup").show(); $("#Recruit .btnGroup2").hide(); b.show() } }); f.on("click", function () { $(".progressArea").stop().animate({ marginLeft: "+=1800px" }, 300); d = a; a = parseFloat(d) - 2; $(".progressTitle .steps").siblings().removeClass("active").eq(a - 1).addClass("active"); $(".page-num .cur").html(a).attr("data-page", a); if (a == 1) { scene_1(); c.hide(); $("#Recruit .btnGroup").css({ "text-align": "right" }) } else { c.show() } if (a == 2) { scene_2() } if (a == 3) { scene_3(); b.hide(); $("#Recruit .btnGroup").hide(); $("#Recruit .btnGroup2").show() } else { $("#Recruit .btnGroup").show(); $("#Recruit .btnGroup2").hide(); b.show() } }); e.on("click", function () { $('#Recruit .progressArea .stage [class*="com-"]').hide(); a = 1; d = $(".page-num .cur").attr("data-page", a); $(".page-num .cur").html(a).attr("data-page", a); console.log(d); console.log(a); $(".progressTitle .steps").siblings().removeClass("active").eq(a - 1).addClass("active"); if (a == 1) { scene_1(); c.hide(); $("#Recruit .btnGroup").css({ "text-align": "right" }) } else { c.show() } if (a == 2) { scene_2() } if (a == 3) { scene_3(); b.hide(); $("#Recruit .btnGroup").hide(); $("#Recruit .btnGroup2").show() } else { $("#Recruit .btnGroup").show(); $("#Recruit .btnGroup2").hide(); b.show() } }); $(".progressArea").css({ "margin-left": 0 }) } function scene_1() { $('#Recruit .progressArea .stage [class^="com-"]').hide(); $(".stage.one .action1").hide().stop().delay(1000 / 1.5).show(300); $(".stage.one .action2").hide().stop().delay(2000 / 1.5).fadeIn(); $(".stage.one .action3").hide().stop().delay(3000 / 1.5).fadeIn(); $(".stage.one .action4").hide().stop().delay(5000 / 1.5).show(300); $(".stage.one .action5").hide().stop().delay(6000 / 1.5).fadeIn(); $(".stage.one .action6").hide().stop().delay(7000 / 1.5).fadeIn(); $(".progressContorls .moTTo").html("完整的录入您的商品信息、会员信息，便于您更有条理的打理生意哦！") } function scene_2() { $('#Recruit .progressArea .stage [class^="com-"]').hide(); $(".stage.two .action1").hide().stop().delay(1000 / 1.5).show(300); $(".stage.two .action5").hide().stop().delay(2000 / 1.5).show(300); $(".progressContorls .moTTo").html("良好的记录习惯，让你的生意更上一层楼") } function scene_3() { $('#Recruit .progressArea .stage [class^="com-"]').hide(); $(".stage.three .action1").hide().stop().delay(1000 / 1.5).show(300); $(".stage.three .action2").hide().stop().delay(2000 / 1.5).fadeIn(); $(".stage.three .action3").hide().stop().delay(3000 / 1.5).fadeIn(); $(".stage.three .action4").hide().stop().delay(5000 / 1.5).show(300); $(".stage.three .action4-a").hide().stop().delay(6000 / 1.5).fadeIn(); $(".stage.three .action5").hide().stop().delay(7000 / 1.5).fadeIn(); $(".stage.three .action6").hide().stop().delay(8000 / 1.5).fadeIn(); $(".progressContorls .moTTo").html("会营销的老板，才是好老板") };

//dwz.theme.js
(function (a) { a.fn.extend({ theme: function (b) { var d = a.extend({ themeBase: "themes" }, b); var c = d.themeBase + "/#theme#/style.css"; return this.each(function () { var e = a(this).find(">li[theme]"); var g = function (h) { a("head").find("link[href$='style.css']").attr("href", c.replace("#theme#", h)); e.find(">div").removeClass("selected"); e.filter("[theme=" + h + "]").find(">div").addClass("selected"); if (a.isFunction(a.cookie)) { a.cookie("dwz_theme", h) } }; e.each(function (h) { var j = a(this); var i = j.attr("theme"); j.addClass(i).click(function () { g(i) }) }); if (a.isFunction(a.cookie)) { var f = a.cookie("dwz_theme"); if (f) { g(f) } } }) } }) })(jQuery);

//dwz.contextmenu.js
(function (b) { var e, f, d; b.fn.extend({ contextMenu: function (j, h) { var i = b.extend({ shadow: true, bindings: {}, ctrSub: null }, h); if (!e) { e = b('<div id="contextmenu"></div>').appendTo("body").hide() } if (!f) { f = b('<div id="contextmenuShadow"></div>').appendTo("body").hide() } d = d || []; d.push({ id: j, shadow: i.shadow, bindings: i.bindings || {}, ctrSub: i.ctrSub }); var g = d.length - 1; b(this).bind("contextmenu", function (k) { c(g, this, k, i); return false }); return this } }); function c(i, h, k, g) { var m = d[i]; var j = b(DWZ.frag[m.id]); j.find("li").hoverClass(); e.html(j); b.each(m.bindings, function (p, o) { b("[rel='" + p + "']", e).bind("click", function (q) { a(); o(b(h), b("#" + m.id)) }) }); var n = k.pageX; var l = k.pageY; if (b(window).width() < n + e.width()) { n -= e.width() } if (b(window).height() < l + e.height()) { l -= e.height() } e.css({ left: n, top: l }).show(); if (m.shadow) { f.css({ width: e.width(), height: e.height(), left: n + 3, top: l + 3 }).show() } b(document).one("click", a); if (b.isFunction(m.ctrSub)) { m.ctrSub(b(h), b("#" + m.id)) } } function a() { e.hide(); f.hide() } })(jQuery);

//dwz.navTab.js
var loadTimeOut, GloablLoadingIndex, navTab = { componentBox: null, _tabBox: null, _prevBut: null, _nextBut: null, _panelBox: null, _moreBut: null, _moreBox: null, _currentIndex: 0, _op: { id: "navTab", stTabBox: ".navTab-tab", stPanelBox: ".navTab-panel", mainTabId: "main", close$: "a.close", prevClass: "tabsLeft", nextClass: "tabsRight", stMore: ".tabsMore", stMoreLi: "ul.tabsMoreList" }, init: function (a) { $.History && $.History.init("#container"); var b = this; $.extend(this._op, a), this.componentBox = $("#" + this._op.id), this._tabBox = this.componentBox.find(this._op.stTabBox), this._panelBox = this.componentBox.find(this._op.stPanelBox), this._prevBut = this.componentBox.find("." + this._op.prevClass), this._nextBut = this.componentBox.find("." + this._op.nextClass), this._moreBut = this.componentBox.find(this._op.stMore), this._moreBox = this.componentBox.find(this._op.stMoreLi), this._prevBut.click(function () { b._scrollPrev() }), this._nextBut.click(function () { b._scrollNext() }), this._moreBut.click(function () { return b._moreBox.show(), !1 }), $(document).click(function () { b._moreBox.hide() }), this._contextmenu(this._tabBox), this._contextmenu(this._getTabs()), this._init(), this._ctrlScrollBut() }, _init: function () { var a = this; this._getTabs().each(function (b) { $(this).unbind("click").click(function () { a._switchTab(b) }), $(this).find(navTab._op.close$).unbind("click").click(function () { a._closeTab(b) }) }), this._getMoreLi().each(function (b) { $(this).find(">a").unbind("click").click(function () { a._switchTab(b) }) }), this._switchTab(this._currentIndex) }, _contextmenu: function (a) { var b = this; a.contextMenu("navTabCM", { bindings: { reload: function (a) { b._reload(a, !0) }, closeCurrent: function (a) { var d = a.attr("tabid"); d ? b.closeTab(d) : b.closeCurrentTab() }, closeOther: function (a) { var d = b._indexTabId(a.attr("tabid")); b._closeOtherTab(d > 0 ? d : b._currentIndex) }, closeAll: function () { b.closeAllTab() } }, ctrSub: function (a, c) { var d = c.find("[rel='reload']"), e = c.find("[rel='closeCurrent']"), f = c.find("[rel='closeOther']"), g = c.find("[rel='closeAll']"), h = b._getTabs(); h.size() < 2 && (e.addClass("disabled"), f.addClass("disabled"), g.addClass("disabled")), 0 == b._currentIndex || a.attr("tabid") == b._op.mainTabId ? (e.addClass("disabled"), d.addClass("disabled")) : 2 == h.size() && f.addClass("disabled") } }) }, _getTabs: function () { return this._tabBox.find("> li") }, _getPanels: function () { return this._panelBox.find("> div") }, _getMoreLi: function () { return this._moreBox.find("> li") }, _getTab: function (a) { var b = this._indexTabId(a); return b >= 0 ? this._getTabs().eq(b) : void 0 }, _getPanel: function (a) { var b = this._indexTabId(a); return b >= 0 ? this._getPanels().eq(b) : void 0 }, _getTabsW: function (a, b) { return this._tabsW(this._getTabs().slice(a, b)) }, _tabsW: function (a) { var b = 0; return a.each(function () { b += $(this).outerWidth(!0) }), b }, _indexTabId: function (a) { if (!a) return -1; var b = -1; return this._getTabs().each(function (c) { return $(this).attr("tabid") == a ? (b = c, void 0) : void 0 }), b }, _getLeft: function () { return this._tabBox.position().left }, _getScrollBarW: function () { return this.componentBox.width() - 55 }, _visibleStart: function () { var d, a = this._getLeft(), b = 0, c = this._getTabs(); for (d = 0; d < c.size() ; d++) { if (b + a >= 0) return d; b += c.eq(d).outerWidth(!0) } return 0 }, _visibleEnd: function () { var d, a = this._getLeft(), b = 0, c = this._getTabs(); for (d = 0; d < c.size() ; d++) if (b += c.eq(d).outerWidth(!0), b + a > this._getScrollBarW()) return d; return c.size() }, _scrollPrev: function () { var a = this._visibleStart(); a > 0 && this._scrollTab(-this._getTabsW(0, a - 1)) }, _scrollNext: function () { var a = this._visibleEnd(); a < this._getTabs().size() && this._scrollTab(-this._getTabsW(0, a + 1) + this._getScrollBarW()) }, _scrollTab: function (a) { var c = this; this._tabBox.animate({ left: a + "px" }, 200, function () { c._ctrlScrollBut() }) }, _scrollCurrent: function () { var a = this._tabsW(this._getTabs()); a <= this._getScrollBarW() ? this._scrollTab(0) : this._getLeft() < this._getScrollBarW() - a ? this._scrollTab(this._getScrollBarW() - a) : this._currentIndex < this._visibleStart() ? this._scrollTab(-this._getTabsW(0, this._currentIndex)) : this._currentIndex >= this._visibleEnd() && this._scrollTab(this._getScrollBarW() - this._getTabs().eq(this._currentIndex).outerWidth(!0) - this._getTabsW(0, this._currentIndex)) }, _ctrlScrollBut: function () { var a = this._tabsW(this._getTabs()); this._getScrollBarW() > a ? (this._prevBut.hide(), this._nextBut.hide(), this._tabBox.parent().removeClass("tabsPageHeaderMargin")) : (this._prevBut.show().removeClass("tabsLeftDisabled"), this._nextBut.show().removeClass("tabsRightDisabled"), this._tabBox.parent().addClass("tabsPageHeaderMargin"), this._getLeft() >= 0 ? this._prevBut.addClass("tabsLeftDisabled") : this._getLeft() <= this._getScrollBarW() - a && this._nextBut.addClass("tabsRightDisabled")) }, _switchTab: function (a) { var b = this._getTabs().removeClass("selected").eq(a).addClass("selected"); this._getPanels().hide().eq(a).show(), this._getMoreLi().removeClass("selected").eq(a).addClass("selected"), this._currentIndex = a, this._scrollCurrent(), this._reload(b) }, _closeTab: function (a, b) { if (this._getTabs().eq(a).remove(), this._getPanels().eq(a).remove(), this._getMoreLi().eq(a).remove(), this._currentIndex >= a && this._currentIndex--, b) { var c = this._indexTabId(b); c > 0 && (this._currentIndex = c) } this._init(), this._scrollCurrent(), this._reload(this._getTabs().eq(this._currentIndex)) }, closeTab: function (a) { var b = this._indexTabId(a); b > 0 && this._closeTab(b) }, closeCurrentTab: function (a) { this._currentIndex > 0 && this._closeTab(this._currentIndex, a) }, closeAllTab: function () { this._getTabs().filter(":gt(0)").remove(), this._getPanels().filter(":gt(0)").remove(), this._getMoreLi().filter(":gt(0)").remove(), this._currentIndex = 0, this._init(), this._scrollCurrent() }, _closeOtherTab: function (a) { if (a = a || this._currentIndex, a > 0) { var b = ":eq(" + a + ")"; this._getTabs().not(b).filter(":gt(0)").remove(), this._getPanels().not(b).filter(":gt(0)").remove(), this._getMoreLi().not(b).filter(":gt(0)").remove(), this._currentIndex = 1, this._init(), this._scrollCurrent() } else this.closeAllTab() }, _loadUrlCallback: function (a) { a.find("[layoutH]").layoutH(), a.find(":button.close").click(function () { navTab.closeCurrentTab() }) }, _reload: function (a, b) { var c, d; b = b || a.data("reloadFlag"), c = a.attr("url"), b && c && (a.data("reloadFlag", null), d = this._getPanel(a.attr("tabid")), a.hasClass("external") ? navTab.openExternal(c, d) : d.loadUrl(c, {}, function () { navTab._loadUrlCallback(d) })) }, reloadFlag: function (a) { var b = this._getTab(a); b && (this._indexTabId(a) == this._currentIndex ? this._reload(b, !0) : b.data("reloadFlag", 1)) }, reload: function (a, b) { var c = $.extend({ data: {}, navTabId: "", callback: null }, b), d = c.navTabId ? this._getTab(c.navTabId) : this._getTabs().eq(this._currentIndex), e = c.navTabId ? this._getPanel(c.navTabId) : this._getPanels().eq(this._currentIndex); e && (a || (a = d.attr("url")), a && (d.hasClass("external") ? navTab.openExternal(a, e) : e.ajaxUrl({ type: "POST", url: a, data: c.data, callback: function (a) { navTab._loadUrlCallback(e), $.isFunction(c.callback) && c.callback(a) } }))) }, getCurrentPanel: function () { return this._getPanels().eq(this._currentIndex) }, checkTimeout: function () { var a = DWZ.jsonEval(this.getCurrentPanel().html()); a && a.statusCode == DWZ.statusCode.timeout && this.closeCurrentTab() }, openExternal: function (a, b) { var c = navTab._panelBox.height(); b.html(DWZ.frag["externalFrag"].replaceAll("{url}", a).replaceAll("{height}", c + "px")) }, openTab: function (a, b, c) { var g, h, i, j, k, l, m, d = a, e = b, f = c.title; clearTimeout(loadTimeOut), clearTimeout(GloablLoadingIndex), GloablLoadingIndex = setTimeout(function () { var a, b, c, g, h, i, j; loadTimeOut = setTimeout(function () { var a = $("#background,#progressBar"); null != a.html() && ($("#progressBar").html("打开过慢？ <a id='reloadpage' href='javascript:void(0)' title='重新加载当前页面'> [ 重新加载 ]</a><span id='closepage' title='取消加载' class='close'>&times;</span>"), $("#reloadpage").live("click", function () { skjs_leftchange(d, e, f) }), $("#closepage").live("click", function () { hidepro() })) }, 5e3), a = $("#background,#progressBar"), null == a.html() ? $("body").append('<div id="background" class="background" ></div><div id="progressBar" class="progressBar" >正在加载，请稍等...</div>') : $("#progressBar").html("正在加载，请稍等..."), b = $("#navTab .tabsPageContent"), c = b.offset(), g = b.height(), h = b.width(), i = c.top + .3 * g, j = c.left + .5 * h, $("#progressBar").css("top", i).css("left", j).show(), $("#background").show() }, 400), g = $.extend({ title: "New Tab", data: {}, fresh: !0, external: !1 }, c), h = this._indexTabId(a), h >= 0 ? (i = this._getTabs().eq(h), j = i.attr("tabid") == this._op.mainTabId ? "> span > span" : "> span", i.find(">a").attr("title", g.title).find(j).text(g.title), k = this._getPanels().eq(h), (g.fresh || i.attr("url") != b) && (i.attr("url", b), g.external || b.isExternalUrl() ? (i.addClass("external"), navTab.openExternal(b, k)) : (i.removeClass("external"), k.ajaxUrl({ type: "GET", url: b, data: g.data, callback: function () { navTab._loadUrlCallback(k) } }))), this._currentIndex = h) : (l = '<li tabid="#tabid#"><a href="javascript:" title="#title#" class="#tabid#"><span>#title#</span></a><a href="javascript:;" class="close">close</a></li>', this._tabBox.append(l.replaceAll("#tabid#", a).replaceAll("#title#", g.title)), this._panelBox.append('<div class="page unitBox"></div>'), this._moreBox.append('<li><a href="javascript:" title="#title#">#title#</a></li>'.replaceAll("#title#", g.title)), m = this._getTabs(), i = m.filter(":last"), k = this._getPanels().filter(":last"), g.external || b.isExternalUrl() ? (i.addClass("external"), navTab.openExternal(b, k)) : (i.removeClass("external"), k.ajaxUrl({ type: "GET", url: b, data: g.data, callback: function () { navTab._loadUrlCallback(k) } })), $.History && setTimeout(function () { $.History.addHistory(a, function (a) { var b = navTab._indexTabId(a); b >= 0 && navTab._switchTab(b) }, a) }, 10), this._currentIndex = m.size() - 1, this._contextmenu(m.filter(":last").hoverClass("hover"))), this._init(), this._scrollCurrent(), this._getTabs().eq(this._currentIndex).attr("url", b) } };